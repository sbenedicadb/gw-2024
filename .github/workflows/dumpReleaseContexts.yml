# This is a basic workflow that is manually triggered

name: Dump release contexts

# Controls when the action will run. Workflow runs when manually triggered using the UI
# or API.
on:  
  release:
    types: [released]    

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  dump_contexts_to_log:
    runs-on: ubuntu-latest
    steps:
      - name: Dump GitHub context
        env:
          GITHUB_CONTEXT: ${{ toJson(github) }}
        run: echo "$GITHUB_CONTEXT"
      - name: Dump job context
        env:
          JOB_CONTEXT: ${{ toJson(job) }}
        run: echo "$JOB_CONTEXT"
      - name: Dump steps context
        env:
          STEPS_CONTEXT: ${{ toJson(steps) }}
        run: echo "$STEPS_CONTEXT"
      - name: Dump runner context
        env:
          RUNNER_CONTEXT: ${{ toJson(runner) }}
        run: echo "$RUNNER_CONTEXT"
      - name: Dump strategy context
        env:
          STRATEGY_CONTEXT: ${{ toJson(strategy) }}
        run: echo "$STRATEGY_CONTEXT"
      - name: Dump matrix context
        env:
          MATRIX_CONTEXT: ${{ toJson(matrix) }}
        run: echo "$MATRIX_CONTEXT"

  # tweet:
  #   runs-on: ubuntu-latest
  #   steps:   
  #   - name: post to x
  #     uses: nearform-actions/github-action-notify-twitter@v1.2.2
  #     with:
  #       message: |
  #         ${{ github.event.repository.name }} v${{ github.event.release.tag_name }} has been released!
          
  #         Check out the release notes: ${{ github.event.release.html_url }}
  #       twitter-app-key: ${{ secrets.TWITTER_API_KEY }}
  #       twitter-app-secret: ${{ secrets.TWITTER_API_SECRET_KEY }}
  #       twitter-access-token: ${{ secrets.TWITTER_ACCESS_TOKEN }}
  #       twitter-access-token-secret: ${{ secrets.TWITTER_ACCESS_TOKEN_SECRET }}
          
